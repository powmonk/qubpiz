<div class="round-manager-container">
    <h3>Rounds</h3>
    
    <div class="round-control-buttons">
      <button (click)="showNewRoundForm = !showNewRoundForm" class="add-round-btn">
        {{ showNewRoundForm ? 'Cancel' : '+ Add New Round' }}
      </button>

      <button *ngIf="currentDisplayedRoundId" (click)="setDisplayRound(null)" class="clear-display-btn">
        Clear Player Display
      </button>
    </div>
    
    <div *ngIf="showNewRoundForm" class="round-form">
      <label>Round Name</label>
      <input type="text" [(ngModel)]="newRoundName" placeholder="e.g., General Knowledge" required />
      
      <label>Round Type</label>
      <select [(ngModel)]="newRoundType">
          <option value="text">Text (General Question)</option>
          <option value="picture">Picture Round</option>
          <option value="music">Music Round (Text/Audio)</option>
          <option value="multiple_choice">Multiple Choice</option>
      </select>
      
      <button (click)="createRound()" class="save-btn">Create Round</button>
    </div>
    
    <div *ngIf="rounds.length === 0 && !showNewRoundForm" class="no-rounds">
        No rounds created yet.
    </div>

    <table *ngIf="rounds.length > 0" class="data-table">
        <tbody>
            <tr *ngFor="let round of rounds; let i = index"
                (click)="selectRound(round)"
                [class.odd]="i % 2 === 1"
                [class.active]="selectedRound?.id === round.id"
                [class.is-displayed]="currentDisplayedRoundId === round.id">

                <td class="round-info-cell">
                    <strong>Round {{ round.round_order }}: {{ round.name }}</strong>
                    <span class="round-type">({{ round.round_type | titlecase }})</span>
                </td>

                <td class="round-actions-cell">
                    <button (click)="setDisplayRound(round); $event.stopPropagation()"
                            [class]="currentDisplayedRoundId === round.id ? 'display-active-btn' : 'display-btn'"
                            [disabled]="currentDisplayedRoundId === round.id">
                        {{ currentDisplayedRoundId === round.id ? 'DISPLAYING' : 'Display Round' }}
                    </button>
                </td>

                <td class="action-cell">
                    <button (click)="deleteRound(round.id, $event); $event.stopPropagation()"
                            class="delete-btn-small"
                            title="Delete round">Ã—</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>